# 基础概念

## 硬件层与软件层区分

<details>
<summary>通信系统的两个层次</summary>

在讨论通信系统时，我们需要从两个层面来分析：

- **硬件层**：解决数据如何传输的问题
- **软件层**：解决数据传输含义的问题

这两个层面共同构成了完整的通信系统。
</details>

### 硬件层（RS485）

> 硬件层主要解决的是如何将数据（0和1）从一个设备传输到另一个设备的问题。

硬件层规定了：
- 电气标准
- 接口标准
- 传输线规格
- 信号特性

常见的硬件层通信标准包括：
- RS485（本课程重点）
- RS232
- RS422
- I²C
- SPI
- CAN

### 软件层（Modbus）

> 软件层解决的是数据传输的含义，即传输的数据代表什么意义、要解决什么问题。

软件层定义了：
- 数据格式
- 通信规则
- 命令结构
- 错误处理

**比喻**：如果硬件层是公路，保证车辆能从一个城市到另一个城市，那么软件层就像交通规则，规定了如何行驶以及各种标志的含义。

<div style="text-align: center; margin: 20px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
<strong>重要概念区分</strong><br>
Modbus是一个<span style="color: red;">软件层</span>的协议<br>
RS485是一个<span style="color: blue;">硬件层</span>的标准
</div>

## RS485通信原理简介

RS485是一种基于差分信号的串行通信标准，具有以下特点：

- **差分信号传输**：通过A、B两线的电位差来表示逻辑状态
- **抗干扰能力强**：共模干扰会同时影响两根信号线，差分接收时可以消除
- **传输距离远**：标准规定可达1200米（实际应用中通常在几百米以内）
- **多点通信**：支持多个设备挂在同一总线上（理论上最多支持32个节点）

### RS485的逻辑电平定义

| 逻辑状态 | 电压关系 |
|---------|---------|
| 逻辑"0"  | B线电压 > A线电压 |
| 逻辑"1"  | A线电压 > B线电压 |

> **注意**：RS485通常采用半双工通信方式（两线制），也支持全双工方式（四线制）。

## Modbus协议简介

Modbus是一种应用于主从架构的通信协议，被广泛应用于工业自动化领域。

<details>
<summary>为什么选择Modbus？</summary>

Modbus协议有以下优势：
- 开放标准，免费使用
- 易于实现和部署
- 在工业领域广泛应用
- 允许不同厂商的设备互相通信
- 支持多种硬件接口（RS485、RS232、TCP/IP等）

通过统一的通信规约，不同厂商的产品可以相互配合工作，避免了各自定义通信协议带来的兼容性问题。
</details>

### Modbus的基本特点

1. **主从架构**：一个主机可以控制多个从机
2. **轮询机制**：主机询问，从机应答
3. **标准功能码**：定义了读写操作
4. **地址映射**：使用标准地址模型

---

**需要插入图片的位置**：
1. 硬件层与软件层的概念图
2. RS485差分信号示意图
3. Modbus主从架构示意图

---

## 总结

- RS485是硬件通信标准，提供物理层支持
- Modbus是软件通信协议，定义数据交换规则
- 两者结合可以构建可靠的工业通信系统
- 理解层次区分是掌握通信系统的基础 